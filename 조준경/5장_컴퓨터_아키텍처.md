## ✅ 새롭게 알게 된 내용

## 5.1. 컴퓨터 아키텍처 기초

### 5.1.1 내장식 프로그램 개념

- **내장식 프로그램**: 컴퓨터는 고정된 하드웨어 플랫폼을 기반으로 하며, 프로그램 코드는 메모리에 데이터처럼 저장되어 소프트웨어로 동작한다.

### 5.1.2 폰 노이만 구조

- **폰 노이만 구조**: 중앙 처리 장치(CPU)가 메모리 장치와 통신하고, 입력 장치에서 데이터를 받아 출력 장치로 데이터를 보내는 구조를 가진다.
- **내장식 프로그램 개념**: 명령어와 데이터가 동일한 메모리에 저장되어 CPU에 의해 처리된다.
-  아래는 일반적인 폰 노이만 컴퓨터 구조

![image](https://github.com/user-attachments/assets/13cfd752-2ba7-4a3d-a5d6-c3a4f804011b)


### 5.1.3 메모리
컴퓨터 메모리는 물리적 관점과 논리적 관점에서 바라볼 수 있다.
- **물리적 관점**: 주소를 지정할 수 있는 고정된 크기의 레지스터들이 선형적으로 배열되어 있으며, 각 레지스터는 고유 주소와 값을 가진다.
- **논리적 관점**: 주소 공간은 데이터 저장과 명령어 저장 두 가지 용도로 사용되며, 명령어 단어와 데이터 단어는 모두 비트 열로 표현된다.
- **RAM(임의 접근 메모리)**: 메모리 크기나 레지스터 위치와 관계없이 무작위로 선택된 메모리에 즉시 접근할 수 있다.

### 5.1.4 중앙 처리 장치
중앙 처리 장치(CPU)는 현재 실행중인 프로그램의 명령어를 실행하는 일을 맡고, 각 명령어는 CPU에 수행할 계산, 접근할 레지스터, 다음에 불러와서 실행할 명령어를 알려 준다.
CPU는 산술 논리 장치, 레지스터 집합, 제어 장치를 활용해서 이 작업들을 실행한다.
- **CPU 구성 요소**:
  - **ALU(산술 논리 장치)**: 컴퓨터에서 지원하는 모든 저수준 산술 및 논리 연산을 수행한다.
  - **레지스터**: CPU 내에서 중간 값을 임시로 저장하며, 데이터 레지스터, 주소 레지스터, 프로그램 카운터(PC), 명령어 레지스터 등이 있다.
  - **제어 장치**: 명령어를 디코딩하여 CPU 내의 다양한 장치에 수행할 작업을 지시한다.

- **인출-실행 주기**: CPU는 명령어 메모리에서 2진 기계 명령어를 인출하고, 디코딩하고, 실행하며, 이 반복적인 프로세스를 인출-실행 주기라고 한다.

### 5.1.5 입력과 출력
컴퓨터는 다양한 입력/출력 장치를 통해 외부환경과 통신한다.
이러한 입출력 장치들을 메모리 매핑 I/O 추상화 기법을 통하여
컴퓨터에서는 다른 종류의 입력/출력 장치를 같은 관점으로 볼 수 있다.
- **메모리 매핑 I/O**: I/O 장치의 2진 에뮬레이션을 만들어 CPU에게 일반적인 선형 메모리 세그먼트처럼 보이도록 하는 추상화 기법이다.
- **키보드 입력**: 사용자가 키보드에서 키를 누르면, 해당 키의 2진 코드가 키보드의 메모리 맵에 나타난다.
- **스크린 출력**: 스크린의 메모리 맵에 비트를 기록하면, 해당 비트에 대응하는 픽셀이 켜지거나 꺼진다.

## 5.2 핵 하드웨어 플랫폼

### 5.2.1 개요

- **핵 컴퓨터**: 명령어 메모리(ROM)에 있는 프로그램을 실행하며, CPU는 ALU, 데이터 레지스터(D), 주소 레지스터(A), 프로그램 카운터(PC)로 구성된다.

### 5.2.2 중앙 처리 장치
핵 CPU의 인터페이스는 다음과 같다.

![image](https://github.com/user-attachments/assets/c5a1aecf-f542-4123-9c4d-e3b8bcc4a788)


- **CPU 인터페이스**:
  - **입력**:
    - `instruction[16]`: 실행할 명령어
    - `inM[16]`: 명령어의 M 입력 (RAM[A]의 내용)
    - `reset`: 프로그램을 재시작할지 여부를 결정하는 신호
  - **출력**:
    - `outM[16]`: RAM[addressM]에 기록되는, 명령어의 M 출력
    - `addressM`: 어느 주소에 기록할지 결정
    - `writeM`: 메모리에 기록 여부
    - `pc[15]`: 다음 명령어의 주소

- **명령어 처리**:
  - **A-명령어**: 16비트 명령어 값을 A 레지스터에 로드한다.
  - **C-명령어**: ALU가 지정된 계산을 수행하고, A, D, M 레지스터 중 지정된 대상 레지스터에 값을 저장한다.

---

## ✅ 어려웠던 점

- **메모리 매핑 I/O 개념 이해**: I/O 장치의 상태를 메모리 맵에 반영하고, 이를 통해 입출력을 처리하는 방식이 처음에는 다소 복잡하게 느껴졌다.
- **핵 CPU의 명령어 처리 과정**: A-명령어와 C-명령어의 처리 방식과 각 레지스터 및 ALU의 상호작용을 이해하는 데 시간이 필요했다.
- **프로그램 카운터(PC) 동작 방식**:프로그램 카운터가 명령어를 순차적으로 실행하지만, 조건 분기나 점프 명령이 포함되면 특정 주소로 이동해야 하는데, 이를 하드웨어적으로 어떻게 구현하는지가 어려웠다.
---
